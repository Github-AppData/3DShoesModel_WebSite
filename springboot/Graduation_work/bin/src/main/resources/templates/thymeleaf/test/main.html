<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="Male_Fashion Template">
    <meta name="keywords" content="Male_Fashion, unica, creative, html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>5조신발점 메인화면</title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600;700;800;900&display=swap"
    rel="stylesheet">

    <!-- Css Styles -->
    <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="css/elegant-icons.css" type="text/css">
    <link rel="stylesheet" href="css/magnific-popup.css" type="text/css">
    <link rel="stylesheet" href="css/nice-select.css" type="text/css">
    <link rel="stylesheet" href="css/owl.carousel.min.css" type="text/css">
    <link rel="stylesheet" href="css/slicknav.min.css" type="text/css">
    <link rel="stylesheet" href="css/style.css" type="text/css">
</head>

<body>
	
	<script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.141.0/build/three.module.js",
        "GLTFLoader": "https://unpkg.com/three@0.141.0/examples/jsm/loaders/GLTFLoader.js",
        "OrbitControls": "https://unpkg.com/three@0.141.0/examples/jsm/controls/OrbitControls.js"
      }
    }
  </script>
  <script type="module" src="js/3dmodel.js"></script>
  <script src="js/numeral.js"></script>

    <!-- Page Preloder -->
    <div id="preloder">
        <div class="loader"></div>
    </div>

    <!-- Offcanvas Menu Begin -->
    <div class="offcanvas-menu-overlay"></div>
    <div class="offcanvas-menu-wrapper">
        <div class="offcanvas__option">
            <div class="offcanvas__links">
                <a href="login"><p id="isLogin">로그인</p></a>
                <a href="#">FAQ</a>
            </div>
            <div class="offcanvas__top__hover">
                <span>KRW <i class="arrow_carrot-down"></i></span>
                <ul>
                    <li>USD</li>
                    <li>EUR</li>
                    <li>KRW</li>
                </ul>
            </div>
        </div>
        <div class="offcanvas__nav__option">
            <a href="#" class="search-switch"><img src="img/icon/search.png" alt=""></a>
            <a href="#"><img src="img/icon/heart.png" alt=""></a>
			<a href="shopping-cart ver.1.html"><img src="img/icon/cart.png" alt=""> <span>0</span></a>
        </div>
        <div id="mobile-menu-wrap"></div>
        <div class="offcanvas__text">
            <p>상품 수령 후, 7일 이내 교환 및 반품이 가능합니다.</p>
        </div>
    </div>
    <!-- Offcanvas Menu End -->

    <!-- Header Section Begin -->
    <header class="header">
        <div class="header__top">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6 col-md-7">
                        <div class="header__top__left">
                            
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-5">
                        <div class="header__top__right">
                            <div class="header__top__links">
                                <a th:if="${userID}" th:href="@{/LogoutServlet}" id="sendData">로그아웃</a> <!--th:href="@{sLogout} 로그 아웃 서블릿으로-->
                				<a th:unless="${userID != null}" th:href="@{sLogin}">로그인</a>
                            </div>
                            <div class="header__top__hover">
                            <!-- 임의에 dto 객체를 저렇게 줫는데 user.name이 아닌 user.uid 나 userDTO.name 같이 지정해서 백에서 정해주길
                            	login은 컨트롤러 쪽에서 로그인 처리를 할때 모델에 true false 처럼 참 거짓으로 해서 불타임으로 보내주면 될듯 -->
                                <span th:if="${userID}" th:text="${userID} + '님 어서오세요'"></span>
    							<span th:unless="${userID}" th:text="어서오세요"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-3">
                    <div class="header__logo">
                        <a href="main"><img src="img/logo.png" alt="" width="140" height="60" class="d-inline-block align-top rounded img-thumbnail"></a>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6" >
                    <nav class="header__menu mobile-menu">
                        <ul>
                            <li class="active"><a href="main">메인화면</a></li>
                            <li><a href="sMain">신발</a>
                            <li><a href="noticdBoard">게시판 </a></li>
                            <li><a href="sContact">매장찾기</a></li>
                        </ul>
                    </nav>
                </div>
                
                <div class="col-lg-3 col-md-3" >
                
                    	<div class="header__nav__option">
							<a href="like"><img src="img/icon/heart.png" alt=""></a>
							<a href="sCart"><img src="img/icon/cart.png" alt=""></a>
							<a href="mypage"><img src="img/icon/my.png" style="width: 20px; height: 20px;"></a>
						</div>
                </div>
            </div>
            <div class="canvas__open"><i class="fa fa-bars"></i></div>
        </div>
    </header>
    <!-- Header Section End -->

    <!-- Hero Section Begin --> <!-- 배너 슬라이드 부분 -->
    <section class="hero">
	<div style="text-align:center" oncontextmenu='return false'>
    	<video class="video" src="video/sVideo.mp4" autoplay="autoplay" muted="muted" loop="loop" >
    	
    	</video>
	</div>
    </section>
    <!-- Hero Section End -->

	<div class="container3d">
	<div class="products3d">
	<div class="h1s">Our new Products</div>
      <a onclick="DetailPageSet(this)" data-link-id="0" th:href="@{sDetails}"> 
        <canvas id="canvas1" style="margin-right: 20px;
  					margin-bottom: 20px;" width="225" height="225">
  		</canvas>
        <h6 style="font-weight:bold;" id="shoes1_name"></h6>
        <p class="price3d" id="shoes1_price"></p>
        
      </a>
      <a onclick="DetailPageSet(this)" data-link-id="1" th:href="@{sDetails}"> 
        <canvas id="canvas2" style="margin-right: 20px;
  					margin-bottom: 20px;" width="225" height="225">
  		</canvas>
        <h6 style="font-weight:bold;" id="shoes2_name">	</h6>
        <p class="price3d" id="shoes2_price"></p>
      </a>
      <a onclick="DetailPageSet(this)" data-link-id="2" th:href="@{sDetails}">
        <canvas id="canvas3" style="margin-right: 20px;
  					margin-bottom: 20px;" width="225" height="225">
  		</canvas>
        <h6 style="font-weight:bold;" id="shoes3_name"></h6>
        <p class="price3d" id="shoes3_price"></p>
      </a>
      <a onclick="DetailPageSet(this)" data-link-id="3" th:href="@{sDetails}"> 
        <canvas id="canvas4" style="margin-right: 20px;
  					margin-bottom: 20px;" width="225" height="225">
  		</canvas>
        <h6 style="font-weight:bold;" id="shoes4_name"></h6>
        <p class="price3d" id="shoes4_price"></p>
      </a>
      <a onclick="DetailPageSet(this)" data-link-id="4" th:href="@{sDetails}"> 
        <canvas id="canvas5" style="margin-right: 20px;
  					margin-bottom: 20px;" width="225" height="225">
  		</canvas>
        <h6 style="font-weight:bold;" id="shoes5_name"> </h6>
        <p class="price3d" id="shoes5_price"></p>
      </a>
      <a onclick="DetailPageSet(this)" data-link-id="5" th:href="@{sDetails}"> 
        <canvas id="canvas6" style="margin-right: 20px;
  					margin-bottom: 20px;" width="225" height="225">
  		</canvas>
        <h6 style="font-weight:bold;" id="shoes6_name"></h6>
        <p class="price3d" id="shoes6_price"></p>
      </a>
      <div class="clearfix"></div>
    </div>
	</div>
	
	
	
	

    <!-- Categories Section Begin -->
    <section class="categories spad" style="background-image: url(img/bgsnow.png)">
        <div class="container">
            <div class="row">
                <div class="col-lg-3">
                    <div class="categories__text">
                        <h2>나이키<br /> <span>TIME-DEAL</span> <br /> 이월상품</h2>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="categories__hot__deal">
                        <img src="img/product-sale.png" alt="">
                        <div class="hot__deal__sticker">
                            <span>이월특가</span>
                            <h5>69,000원</h5>
                        </div>
                    </div>
                </div>

                <!--jquery - js 이용하는것으로 판단됨-->
                <div class="col-lg-4 offset-lg-1">
                    <div class="categories__deal__countdown">
                        <span>Deal Of The Week</span>
                        <h2>에어맥스 베로나 22FW</h2>
                        <div class="categories__deal__countdown__timer" id="countdown">
                            <div class="cd-item">
                                <span>3</span>
                                <p>일</p>
                            </div>
                            <div class="cd-item">
                                <span>1</span>
                                <p>시</p>
                            </div>
                            <div class="cd-item">
                                <span>50</span>
                                <p>분</p>
                            </div>
                            <div class="cd-item">
                                <span>18</span>
                                <p>초</p>
                            </div>
                        </div>
                        <a th:href="@{sMain}" class="primary-btn">Shop now</a>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Categories Section End -->



    <!-- Footer Section Begin -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-6 col-sm-6">
                    <div class="footer__about">
                        <div class="footer__logo">
                            <a href="#"><img src="img/logo2.png" alt=""></a>
                        </div>
                        <p>5조신발점은 리퍼, 중고제품이 아닌 <br><span style="color:rgb(81, 255, 0)">새상품</span>만을 판매합니다.</p>
                        
                    </div>
                </div>
                <div class="col-lg-2 offset-lg-1 col-md-3 col-sm-6">
                    <div class="footer__widget">
                        <h6>상품목록</h6>
                        <ul>
                            <li><a href="#">남성 신발</a></li>
                            <li><a href="#">여성 신발</a></li>
                            <li><a href="#">유아용 신발</a></li>
                            <li><a href="#">할인 제품</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6">
                    <div class="footer__widget">
                        <h6>본사정책</h6>
                        <ul>
                            <li><a href="contact.html">Contact Us</a></li>
                            <li><a href="#">결제 수단</a></li>
                            <li><a href="#">배송 정책</a></li>
                            <li><a href="#">반품 및 교환</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-3 offset-lg-1 col-md-6 col-sm-6">
                    <div class="footer__widget">
                        <h6>구독</h6>
                        <div class="footer__newslatter">
                            <p>신제품 정보 및 <span style="color:rgb(81, 255, 0)">할인</span>과 <span style="color:rgb(81, 255, 0)">프로모션</span> 등을 빠르게 받아보고 싶으시다면?</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12 text-center">
                    <div class="footer__copyright__text">
                        <p>Copyright ©
                            <script>
                                document.write(new Date().getFullYear());
                            </script>2020
                            All rights reserved | 5조신발점 <i class="fa fa-heart-o"
                            aria-hidden="true"></i>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- Footer Section End -->

    <!-- Search Begin -->
    <div class="search-model">
        <div class="h-100 d-flex align-items-center justify-content-center">
            <div class="search-close-switch">+</div>
            <form class="search-model-form">
                <input type="text" id="search-input" placeholder="검색">
            </form>
        </div>
    </div>
    <!-- Search End -->

    <!-- Js Plugins -->
    <script>
		/* 메인 화면에 있는 신발 아이디 순서대로. -->
		<!-- 562be2471d5b45e8a6946fbbcc7c0f04 -->
		<!-- 00fd99e778c244c3bd3b65f99dad7cb2 -->
		<!-- 17f21b0a2515455f96ad194ad5be9142 -->
		<!-- 348c77822bff4de3b6df59839b2fd201
		<!-- b404398cf8ab4773b4b15230a2f7c292 
		<!-- 3d8b49d8fdd54ef8afb69735fa452ee2 */
		
		var xhr = new XMLHttpRequest();
		var xhr2 = new XMLHttpRequest();
		var object = null;
		var imageToModelMapping_real = [];
		
		window.onload= pageLoad;
		
		var ary_shoes_name = ["shoes1_name", "shoes2_name", "shoes3_name", "shoes4_name"
		, "shoes5_name", "shoes6_name"];
		
		var ary_shoes_price = ["shoes1_price", "shoes2_price", "shoes3_price", "shoes4_price"
		, "shoes5_price", "shoes6_price"];
		
		// main 페이지에 정보를 set하는 
		function pageLoad()
		{
			xhr.onreadystatechange = function()
			{
				console.log("xhr.readyState : ", xhr.readyState);
				console.log("xhr.status : ", xhr.status);
				if(xhr.readyState === 4 && xhr.status === 200)
				{
					object = JSON.parse(xhr.responseText);
					objLength = Object.keys(object).length;
					
					for(var i = 0; i < objLength; i++){
						imageToModelMapping_real.push({uid: object[i].shoes_id, shoes_name: object[i].shoes_name, final_price: object[i].final_price});
						console.log("imageToModelMapping_real : "+i, imageToModelMapping_real[i]);
						
						var shoes_info_name = imageToModelMapping_real[i].shoes_name;
						var shoes_info_price = imageToModelMapping_real[i].final_price;
						
						var format_shoes_price = numeral(shoes_info_price).format('0,0');
						document.getElementById(ary_shoes_name[i]).innerHTML = "<h5>" + shoes_info_name + "</h5>";
						document.getElementById(ary_shoes_price[i]).innerHTML = "<h6>" + format_shoes_price + "원 </h6>";
					}
				}
			}
			xhr.open("POST", "/MainPageSetServlet", true);
			xhr.send(null);
		}
		
		function DetailPageSet(element)
		{
			var link_id = null;
			var jsonData = null;
			link_id = element.getAttribute("data-link-id");
			console.log("link_id : ", link_id);
			
			var send_ary = [];
			
			var dataToSend = imageToModelMapping_real[link_id];
			
			if (dataToSend != null) {
				console.log("dataToSend NOT NULL");
				jsonData = JSON.stringify(dataToSend);

			} else {
				console.log("dataToSend NULL");
			}

			console.log("jsonData : ", jsonData);
			
			xhr2.open("POST", "/ProductDetailPageServlet", true);
			xhr2.send(jsonData);
		}
		
		
		
	</script>
    
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.nice-select.min.js"></script>
    <script src="js/jquery.nicescroll.min.js"></script>
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/jquery.countdown.min.js"></script>
    <script src="js/jquery.slicknav.js"></script>
    <script src="js/mixitup.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/main.js"></script>
</body>

</html>